import{a as s,c as l,p}from"./chunk-SFRASIIN.js";import{U as c,Z as i}from"./chunk-D3OC6ZHD.js";var b=class o{constructor(t){this.http=t}baseUrl=`${p.API_URL}contracts/contracts/`;getContracts(t){let e=new s;return t&&Object.keys(t).forEach(r=>{let a=t[r];a!=null&&(e=e.set(r,a.toString()))}),this.http.get(this.baseUrl,{params:e})}getContract(t){return this.http.get(`${this.baseUrl}${t}/`)}createContract(t){return this.http.post(this.baseUrl,t)}updateContract(t,e){return this.http.put(`${this.baseUrl}${t}/`,e)}getMyContracts(){return this.http.get(`${this.baseUrl}my-contracts/`)}getActiveContracts(){let t=new s().set("status","active");return this.http.get(this.baseUrl,{params:t})}completeContract(t){return this.http.patch(`${this.baseUrl}${t}/complete/`,{})}cancelContract(t,e){let r=e?{cancellation_reason:e}:{};return this.http.patch(`${this.baseUrl}${t}/cancel/`,r)}extendContract(t,e){return this.http.patch(`${this.baseUrl}${t}/extend/`,{end_date:e})}getContractStats(){return this.http.get(`${this.baseUrl}stats/`)}uploadContractDocument(t,e){let r=new FormData;return r.append("document",e),this.http.post(`${this.baseUrl}${t}/upload-document/`,r)}getContractDocuments(t){return this.http.get(`${this.baseUrl}${t}/documents/`)}downloadContractPDF(t){return this.http.get(`${this.baseUrl}${t}/download_pdf/`,{responseType:"blob"})}downloadPDF(t,e){this.downloadContractPDF(t).subscribe({next:r=>{let a=window.URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=e||`contract-${t}.pdf`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a)},error:r=>{console.error("Error downloading PDF:",r)}})}static \u0275fac=function(e){return new(e||o)(i(l))};static \u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})};export{b as a};
